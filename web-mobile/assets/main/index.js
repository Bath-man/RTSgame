System.register("chunks:///_virtual/basic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Unit.ts","./UnitsManager.ts","./MathTool.ts","./UnitTypeInform.ts"],(function(t){var e,i,n,r,a,s,o,c,h,u;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,r=t.randomRange,a=t.Vec2},function(t){s=t.UnitState,o=t.Unit},null,function(t){c=t.MathTool},function(t){h=t.UnitType,u=t.UnitTypeInform}],execute:function(){var f;i._RF.push({},"56025qYbO1He7PuIUjPETu3","basic",void 0);var d=n.ccclass,m=(n.property,t("basic",d("basic")(f=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;return n.setMyType=function(){this.type=h.basic},n.attack=function(){this.target.hurt(this.strength,this)},n.loader=function(){this.hp=30,this.guardRange=300,this.statereg(s.Idle,new m),this.statereg(s.Wonder,new p),this.statereg(s.Chase,new l),this.statereg(s.Circling,new g),this.statereg(s.PreAttack,new T),this.statereg(s.Attack,new v),t.prototype.loader.call(this)},n.start=function(){},n.onLoad=function(){this.node.getComponent(u).Unit=this},n.update=function(t){this.UnitUpdate(t)},i}(o))||f),t("basicStateIdle",function(){function t(){this.state=s.Idle,this.moveTime=0,this.repeatTime=0}var e=t.prototype;return e.StateEnter=function(t){this.repeatTime=0,this.moveTime=0,this.oneAct(t)},e.update=function(t,e){this.moveTime+=e,this.moveTime>t.responseTime*r(.7,1.3)&&(this.oneAct(t),this.moveTime=0,this.repeatTime+=1)},e.oneAct=function(t){t.searchEnemy()?t.stateTransform(s.Chase):this.repeatTime>=t.actionRepeat&&t.stateTransform(s.Wonder)},t}())),p=t("basicStateWonder",function(){function t(){this.state=s.Wonder,this.wondertime=void 0,this.dir=void 0}var e=t.prototype;return e.StateEnter=function(t){if(null!=t.guard&&t.isFarFromGuard()){this.wondertime=t.guardRange/t.Speed*r(.7,1.3);var e=r(-45,45);this.dir=c.Ve2Rotate(t.ToGuardV2(),e)}else{this.wondertime=r(.8*t.responseTime,1.2*t.responseTime);var i=r(0,2*Math.PI);this.dir=new a(Math.cos(i),Math.sin(i))}},e.update=function(t,e){t.move(e,this.dir),this.wondertime-=e,this.wondertime<0&&t.stateTransform(s.Idle)},t}()),l=t("basicStateChase",function(){function t(){this.state=s.Chase,this._dir=null,this._time=0}var e=t.prototype;return e.StateEnter=function(t){this.directionConfirm(t),this.detect(t)&&t.targetInReach()&&t.stateTransform(s.Circling)},e.update=function(t,e){this._time-=e,t.move(e,this._dir),this._time<0&&(this.detect(t)?t.targetInReach()?t.stateTransform(s.Circling):this.directionConfirm(t):t.stateTransform(s.Idle))},e.directionConfirm=function(t){var e=Math.PI*r(-t.moveOffsetAngle,t.moveOffsetAngle)/180,i=t.target.node.getPosition().subtract(t.node.getPosition());this._dir=c.Ve2Rotate(new a(i.x,i.y),e).normalize(),this._time=t.responseTime},e.detect=function(t){return!(!t.hastarget()||a.distance(t.target.node.getPosition(),t.node.getPosition())>=t.searchRange)},t}()),g=t("basicStateCircle",function(){function t(){this.state=s.Circling}var e=t.prototype;return e.StateEnter=function(t){},e.update=function(t,e){t.hastarget()?t.attackReady()?t.stateTransform(s.PreAttack):this.circlemove(t,e):t.stateTransform(s.Idle)},e.circlemove=function(t,e){},t}()),T=t("basicStatePreAttack",function(){function t(){this.state=s.PreAttack,this._time=0}var e=t.prototype;return e.StateEnter=function(t){this._time=0},e.update=function(t,e){this._time+=e,this._time>t.attackPrepare&&t.stateTransform(s.Attack)},t}()),v=t("basicStateAttack",function(){function t(){this.state=s.Attack,this.attackTime=0}var e=t.prototype;return e.StateEnter=function(t){},e.update=function(t,e){if(null!=t.target){var i=t.target;i.hurtexpect(t.strength),i.hurt(t.strength,t),t._attackcooldown=t.attackInterval}t.stateTransform(s.Circling)},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/basicBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Bullet.ts","./bulletsManager.ts","./bulletTypeInform.ts"],(function(t){var e,n,l,u,s,i,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,l=t._decorator},function(t){u=t.Bullet},function(t){s=t.bulletsManager,i=t.BulletType},function(t){o=t.bulletTypeInform}],execute:function(){var c;n._RF.push({},"d7923HwBsBNaLbMwYF9DQhf","basicBullet",void 0);var r=l.ccclass;l.property,t("basicBullet",r("basicBullet")(c=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var l=n.prototype;return l.explode=function(){this.target.hp>0&&this.target.hurt(this.damage,this.source),s.instance.bulletDead(this)},l.setMyType=function(){this.type=i.basicBullet},l.onLoad=function(){this.node.getComponent(o).bullet=this},l.update=function(t){this.BulletUpdate(t)},n}(u))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/Bullet.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,s,i,n,r;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,s=t._decorator,i=t.Vec3,n=t.Vec2,r=t.Component}],execute:function(){var l;o._RF.push({},"3a56egxdyVOIKYGoWfx291f","Bullet",void 0);var a=s.ccclass;s.property,t("Bullet",a("Bullet")(l=function(t){function o(){var e;return(e=t.call(this)||this).target=null,e.source=null,e.damage=0,e.Speed=0,e.type=void 0,e._targetpos=void 0,e.setMyType(),e}e(o,t);var s=o.prototype;return s.loader=function(t,e,o,s){this.target=t,this.source=e,this.damage=o,this.Speed=s},s.move=function(t,e,o){var s=this.node.getPosition();this.node.position=new i(s.x+e.x*t*this.Speed,s.y+e.y*t*this.Speed,s.z)},s.BulletUpdate=function(t){if(null==this.source)throw new Error("bullet has no source");if(null==this.target)throw new Error("bullet has no target");this._targetpos=new n(this.target.node.getPosition().x,this.target.node.getPosition().y);var e=new n(this.node.position.x,this.node.position.y),o=this._targetpos.clone().subtract(e).normalize();this.move(t,o),this._targetpos.subtract(e).length()<this.Speed/20&&(console.log("explode"),this.explode())},o}(r))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/bulletsManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./bulletTypeInform.ts"],(function(e){var t,n,r,i,l,s,a,u,o,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){l=e.cclegacy,s=e._decorator,a=e.Prefab,u=e.instantiate,o=e.Component},function(e){c=e.bulletTypeInform}],execute:function(){var p,f,b,h,y,d;l._RF.push({},"5e7a8UHM5RI/KKPKd6NsWjb","bulletsManager",void 0);var v=s.ccclass,g=s.property;e("BulletType",function(e){return e[e.basicBullet=0]="basicBullet",e}({})),e("bulletsManager",(p=v("bulletsManager"),f=g(a),p(((d=function(e){function t(){var n;return n=e.call(this)||this,r(n,"unitPrefabs",y,i(n)),n.types={},t.instance=i(n),n}n(t,e);var l=t.prototype;return l.CreateBullet=function(e,t,n,r,i){void 0===i&&(i=null);var l=null,s=this.unitPrefabs[n];if(null==s)throw new Error("no such a bullet prefab:"+n);if(n in this.types||(this.types[n]=[]),0==this.types[n].length){var a=u(s);a.setParent(this.node),l=a.getComponent(c).bullet}else(l=this.types[n].pop()).node.active=!0;return null==i&&(i=e.strength),l.loader(t,e,i,r),l},l.bulletDead=function(e){this.types[e.type].push(e),e.node.active=!1},t}(o)).instance=void 0,y=t((h=d).prototype,"unitPrefabs",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=h))||b));l._RF.pop()}}}));

System.register("chunks:///_virtual/bulletTypeInform.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,n,l,i,o,u;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,u=e.Component}],execute:function(){var a,c,p,s,f;i._RF.push({},"b658aWv63xCzYN8HNvfg3iA","bulletTypeInform",void 0);var y=o.ccclass,b=o.property;e("bulletTypeInform",(a=y("bulletTypeInform"),c=b(u),a((f=r((s=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i))||this,n(r,"bullet",f,l(r)),r}return t(r,e),r}(u)).prototype,"bullet",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=s))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/CircularSpellMagician.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Unit.ts","./UnitTypeInform.ts","./basic.ts","./bulletsManager.ts","./UnitsManager.ts"],(function(t){var e,a,n,i,r,s,c,o,l,u,h,g,p;return{setters:[function(t){e=t.inheritsLoose,a=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,i=t._decorator},function(t){r=t.UnitState,s=t.Unit},function(t){c=t.UnitType,o=t.UnitTypeInform},function(t){l=t.basicStateCircle,u=t.basicStatePreAttack},function(t){h=t.bulletsManager,g=t.BulletType},function(t){p=t.UnitsManager}],execute:function(){var f;n._RF.push({},"9284eBgr+ZHD6ZIp2rooS+Y","CircularSpellMagician",void 0);var d=i.ccclass,v=(i.property,t("CircularSpellMagician",d("CircularSpellMagician")(f=function(t){function n(){for(var e,a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).targets=null,e}e(n,t);var i=n.prototype;return i.hastarget=function(){return null!=this.targets&&0!=this.targets.length},i.giveupTarget=function(){for(var t,e=this.targets.slice(),n=a(e);!(t=n()).done;){t.value.escapeFromChasing(this)}this.targets.length=0},i.searchEnemy=function(){if(this.targets=p.instance.FindEnemyInRange(this,this.attackRange),null==this.targets)return!1;for(var t,e=a(this.targets);!(t=e()).done;){t.value.chasers.push(this)}return!0},i.losetarget=function(t){if(void 0===t&&(t=null),null==this.targets)throw new Error("CircularSpellMagician 's target is null!");var e=this.targets.indexOf(t);if(!(e>-1))throw new Error("CircularSpellMagician donot has Such a target!");this.targets.splice(e,1)},i.setMyType=function(){this.type=c.CircularSpellMagician},i.attack=function(){for(var t,e=a(this.targets);!(t=e()).done;){var n=t.value,i=h.instance.CreateBullet(this,n,g.basicBullet,400);n.hurtexpect(this.strength),i.node.position=this.node.getPosition()}},i.loader=function(){this.targets=null,this.hp=20,this.strength=2,this.searchRange=400,this.attackRange=400,this.attackInterval=3,this.statereg(r.Idle,new v),this.statereg(r.Circling,new l),this.statereg(r.PreAttack,new u),this.statereg(r.Attack,new y),t.prototype.loader.call(this)},i.onLoad=function(){this.node.getComponent(o).Unit=this},i.update=function(t){this.UnitUpdate(t)},n}(s))||f),t("CircularSpellMagicianIdle",function(){function t(){this.state=r.Idle,this._time=0}var e=t.prototype;return e.StateEnter=function(t){this._time=0},e.update=function(t,e){this._time+=e,t.attackReady()&&this._time>t.responseTime&&(t.searchEnemy()&&t.stateTransform(r.Circling),this._time=0)},t}())),y=t("CircularSpellMagicianStateAttack",function(){function t(){this.state=r.Attack}var e=t.prototype;return e.StateEnter=function(t){},e.update=function(t,e){t.hastarget()&&(t.attack(),t._attackcooldown=t.attackInterval),t.stateTransform(r.Idle),t.giveupTarget()},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/core.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Unit.ts","./UnitTypeInform.ts","./basic.ts","./CircularSpellMagician.ts","./bulletsManager.ts","./UnitsManager.ts","./Shooter.ts"],(function(t){var e,n,i,s,a,r,o,c,h,u,l,p,g,f;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator},function(t){s=t.UnitState,a=t.Unit},function(t){r=t.UnitType,o=t.UnitTypeInform},function(t){c=t.basicStateCircle,h=t.basicStatePreAttack},function(t){u=t.CircularSpellMagicianIdle},function(t){l=t.bulletsManager,p=t.BulletType},function(t){g=t.UnitsManager},function(t){f=t.shooterStateAttack}],execute:function(){var d;n._RF.push({},"498c3g2mRZElqd7ewpIRMjF","core",void 0);var y=i.ccclass;i.property,t("core",y("core")(d=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var i=n.prototype;return i.setMyType=function(){this.type=r.core},i.attack=function(){var t=l.instance.CreateBullet(this,this.target,p.basicBullet,1500);this.target.hurtexpect(this.strength),t.node.position=this.node.getPosition()},i.loader=function(){this.hp=30,this.strength=1e3,this.searchRange=800,this.attackRange=300,this.attackInterval=3,this.statereg(s.Idle,new u),this.statereg(s.Circling,new c),this.statereg(s.PreAttack,new h),this.statereg(s.Attack,new f),t.prototype.loader.call(this)},i.onLoad=function(){this.node.getComponent(o).Unit=this},i.death=function(){this.hastarget()&&this.giveupTarget(),this.escapeFromChasingAll(),g.instance.CoreDestroyed(this.team)},i.update=function(t){this.UnitUpdate(t)},n}(a))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/damageText.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MathTool.ts","./TextManager.ts"],(function(t){var i,e,s,o,a,l,h,n,r,c;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,s=t._decorator,o=t.Label,a=t.Vec2,l=t.Vec3,h=t.Color,n=t.Component},function(t){r=t.MathTool},function(t){c=t.TextManager}],execute:function(){var f;e._RF.push({},"1e2ceEsvFJPjKm16DLzFqsW","damageText",void 0);var m=s.ccclass;s.property,t("damageText",m("damageText")(f=function(t){function e(){for(var i,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return(i=t.call.apply(t,[this].concat(s))||this).dir=null,i.time=void 0,i.scale=void 0,i.halfTime=.5,i.floatTime=.4,i.gravity=void 0,i.offset=void 0,i.label=void 0,i.originPos=void 0,i.finalpos=void 0,i}i(e,t);var s=e.prototype;return s.onLoad=function(){this.label=this.node.getComponent(o),this.loader(new a(1,2),10,new l(0,0,0))},s.loader=function(t,i,e){var s=this.label.color;this.label.color=new h(s.r,s.g,s.b,255),this.label.fontSize=0,this.originPos=e.clone(),this.node.position=e,this.dir=t.normalize().multiplyScalar(100),this.dir=r.Ve2Rotate(this.dir,15),this.time=0,this.scale=30*Math.log10(i)+20,this.gravity=600*Math.log10(i)+300,this.offset=.5*this.gravity*(this.halfTime*this.halfTime),this.label.string=i.toString()},s.update=function(t){var i=this.originPos.clone();if(this.time+=t,this.time<2*this.halfTime){var e=Math.abs(this.time-this.halfTime);if(i.y+=this.offset-.5*this.gravity*e*e,i.y+=this.dir.y*this.time,i.x+=this.dir.x*this.time,this.time<this.halfTime){var s=Math.floor(this.time/this.halfTime*this.scale);this.label.fontSize=s}}else if(this.time<2*this.halfTime+this.floatTime){var o=this.time-2*this.halfTime;i=this.finalpos;var a=this.label.color;this.label.color=new h(a.r,a.g,a.b,255*Math.abs(1-o/this.floatTime))}else c.instance.textRecycle(this);this.node.position=i,this.finalpos=i},e}(n))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/damageTextManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./damageText.ts","./TextManager.ts"],(function(e){var t,a,n,r,i,o,s,l,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,s=e.Prefab,l=e.instantiate},function(e){c=e.damageText},function(e){p=e.TextManager}],execute:function(){var u,g,f,d,h;i._RF.push({},"8ce38Ij65RKlpMiPQGUAI7i","damageTextManager",void 0);var v=o.ccclass,x=o.property;e("damageTextManager",(u=v("damageTextManager"),g=x(s),u((h=t((d=function(e){function t(){var a;return a=e.call(this)||this,n(a,"labPref",h,r(a)),a.pools=void 0,a.pools=[],t.instance=r(a),a}a(t,e);var i=t.prototype;return i.generateText=function(e,t,a){var n=null;if(0==this.pools.length){var r=l(this.labPref);n=r.getComponent(c),r.setParent(this.node)}else(n=this.pools.pop()).node.active=!0;return n.loader(e,t,a),n},i.textRecycle=function(e){e.node.active=!1,this.pools.push(e)},t}(p)).prototype,"labPref",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=d))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/gameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UnitsManager.ts"],(function(n){var e,t,a,r,o,i,s;return{setters:[function(n){e=n.inheritsLoose,t=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,o=n.Vec3,i=n.Component},function(n){s=n.UnitsManager}],execute:function(){var c,u;a._RF.push({},"43606ByyypIgKwewShwsQ6G","gameManager",void 0);var g=r.ccclass;r.property,n("gameManager",g("gameManager")(((u=function(n){function a(){var e;return e=n.call(this)||this,a.instance=t(e),e}e(a,n);var r=a.prototype;return r.start=function(){this.onGameStart()},r.onGameStart=function(){var n=s.instance.CreateCore(0);n.node.position=new o(80,80,0),(n=s.instance.CreateCore(1)).node.position=new o(1200,1200,0)},r.update=function(n){},a}(i)).instance=null,c=u))||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./UnitsManager.ts","./MathTool.ts","./UnitTypeInform.ts","./UnitsRenderer.ts","./damageText.ts","./Bullet.ts","./basicBullet.ts","./bulletTypeInform.ts","./TextManager.ts","./UIManager.ts","./bulletsManager.ts","./damageTextManager.ts","./gameManager.ts","./touchtest.ts","./CircularSpellMagician.ts","./Unit.ts","./basic.ts","./core.ts","./Shooter.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MathTool.ts",["cc"],(function(n){var t,e,c;return{setters:[function(n){t=n.cclegacy,e=n.randomRange,c=n.Vec2}],execute:function(){t._RF.push({},"a2c4edDXkZF75U3p84EJuwE","MathTool",void 0);n("MathTool",function(){function n(){}return n.Vec2Perpendicular=function(n){return e(-1,1)<0?new c(-n.y,n.x):new c(n.y,-n.x)},n.Ve2Rotate=function(n,t){var e=t*Math.PI/180,o=Math.cos(e),r=Math.sin(e),u=n.x*o-n.y*r,a=n.x*r+n.y*o;return new c(u,a)},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Shooter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Unit.ts","./UnitTypeInform.ts","./basic.ts","./bulletsManager.ts"],(function(t){var e,n,a,i,s,o,r,c,h,u,l,p,f,g;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,a=t._decorator},function(t){i=t.UnitState,s=t.Unit},function(t){o=t.UnitType,r=t.UnitTypeInform},function(t){c=t.basicStateIdle,h=t.basicStateWonder,u=t.basicStateChase,l=t.basicStateCircle,p=t.basicStatePreAttack},function(t){f=t.bulletsManager,g=t.BulletType}],execute:function(){var d;n._RF.push({},"0fc19qESlZElLJOKKIQOjqL","Shooter",void 0);var y=a.ccclass,S=(a.property,t("Shooter",y("Shooter")(d=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var a=n.prototype;return a.setMyType=function(){this.type=o.shooter},a.attack=function(){var t=f.instance.CreateBullet(this,this.target,g.basicBullet,200);this.target.hurtexpect(this.strength),t.node.position=this.node.getPosition()},a.loader=function(){this.hp=20,this.strength=2,this.searchRange=800,this.attackRange=300,this.attackInterval=3,this.statereg(i.Idle,new c),this.statereg(i.Wonder,new h),this.statereg(i.Chase,new u),this.statereg(i.Circling,new l),this.statereg(i.PreAttack,new p),this.statereg(i.Attack,new S),t.prototype.loader.call(this)},a.start=function(){},a.onLoad=function(){this.node.getComponent(r).Unit=this},a.update=function(t){this.UnitUpdate(t)},n}(s))||d),t("shooterStateAttack",function(){function t(){this.state=i.Attack}var e=t.prototype;return e.StateEnter=function(t){},e.update=function(t,e){null!=t.target&&(t.attack(),t._attackcooldown=t.attackInterval),t.stateTransform(i.Circling)},t}()));n._RF.pop()}}}));

System.register("chunks:///_virtual/TextManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,o=e.Component}],execute:function(){var a,c;n._RF.push({},"251a9NCIWpDkry8+WRHy+yo","TextManager",void 0);var i=r.ccclass;r.property,e("TextManager",i("TextManager")(((c=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n}(o)).instance=void 0,a=c))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/touchtest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIManager.ts"],(function(t){var e,n,r,i,o,a,c,u,s,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,c=t.CCInteger,u=t.Node,s=t.Component},function(t){l=t.UIManager}],execute:function(){var p,h,f,y,d,g,m;o._RF.push({},"7ad28pGj4RICraq0reB0YdH","touchtest",void 0);var v=a.ccclass,b=a.property;t("touchtest",(p=v("touchtest"),h=b(c),f=b(c),p((g=e((d=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"team",g,i(e)),r(e,"type",m,i(e)),e}n(e,t);var o=e.prototype;return o.start=function(){},o.onLoad=function(){this.node.on(u.EventType.TOUCH_START,this.touched,this)},o.update=function(t){},o.touched=function(){l.instance.team=this.team,l.instance.type=this.type},e}(s)).prototype,"team",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=e(d.prototype,"type",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=d))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UnitsManager.ts"],(function(e){var t,i,n,o,a,s,r,c,h,u,l,g,m,p,d,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,r=e.CCInteger,c=e.input,h=e.Input,u=e.UITransform,l=e.screen,g=e.Vec3,m=e.Vec2,p=e.Size,d=e.Component},function(e){f=e.UnitsManager}],execute:function(){var v,y,w,z,_,U,C,b,I,T;a._RF.push({},"f82a3ZwOYlINqw/1QSZbws2","UIManager",void 0);var S=s.ccclass,L=s.property;e("UIManager",(v=S("UIManager"),y=L(r),w=L(r),z=L(r),v(((T=function(e){function t(){var i;return i=e.call(this)||this,n(i,"size",C,o(i)),n(i,"team",b,o(i)),n(i,"type",I,o(i)),i._camera=void 0,i.designSize=void 0,i._isCameramoving=void 0,t.instance=o(i),i.team=0,i.type=2,i}i(t,e);var a=t.prototype;return a.onLoad=function(){c.on(h.EventType.TOUCH_START,this.touched,this),c.on(h.EventType.TOUCH_MOVE,this.moved,this),c.on(h.EventType.TOUCH_END,this.ended,this),this._camera=this.node.getParent().getChildByName("Camera"),this.designSize=this.node.getParent().getComponent(u).contentSize,this.size=l.windowSize,l.on("window-resize",this.onWindowResize,this)},a.start=function(){},a.update=function(e){},a.tst=function(){console.log("touchend")},a.moved=function(e){if(null==this._camera)throw new Error("no camera");if(0==this._isCameramoving){if(e.getUILocation().subtract(e.getUIStartLocation()).length()>10){this._isCameramoving=!0;var t=e.getUILocation().subtract(e.getUIStartLocation()),i=new g(t.x,t.y,0);this._camera.position=this._camera.position.subtract(i)}}else{var n=new g(e.getUIDelta().x,e.getUIDelta().y,0);this._camera.position=this._camera.position.subtract(n)}},a.touched=function(e){this._isCameramoving=!1},a.ended=function(e){if(!this._isCameramoving){var t=f.instance.CreateUnit(this.type,this.team);if(null!=t){var i=this.TouchPosToLocal(e.getLocation());t.node.position=new g(i.x+this._camera.position.x,i.y+this._camera.position.y,0),t.guard=f.instance.CoreOfTeam(this.team)}else console.log("the team has defeated")}},a.TouchPosToLocal=function(e){return new m(640+this.designSize.width*(e.x/this.size.width-.5),640+this.designSize.height*(e.y/this.size.height-.5))},a.onWindowResize=function(e,t){this.size=new p(e,t)},t}(d)).instance=void 0,C=t((U=T).prototype,"size",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=t(U.prototype,"team",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(U.prototype,"type",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=U))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/Unit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UnitsManager.ts","./damageTextManager.ts"],(function(t){var e,i,r,n,a,o,s,l,h,c,u,g,p,d,f,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy,s=t._decorator,l=t.CCInteger,h=t.CCFloat,c=t.Vec2,u=t.Vec3,g=t.Sprite,p=t.Color,d=t.Component},function(t){f=t.UnitsManager},function(t){b=t.damageTextManager}],execute:function(){var m,v,w,y,P,z,_,k,x,C,S,R,F,T,I,U,A,E,M,D,L,O,V,G,H,N,W,j,B,Y,q,J;o._RF.push({},"66f38xnOMhANItY08kFAETb","Unit",void 0);var K=s.ccclass,Q=s.property,X=t("UnitState",function(t){return t[t.Idle=0]="Idle",t[t.Wonder=1]="Wonder",t[t.Chase=2]="Chase",t[t.Attack=3]="Attack",t[t.Freeze=4]="Freeze",t[t.Circling=5]="Circling",t[t.PreAttack=6]="PreAttack",t}({}));t("Unit",(m=K("Unit"),v=Q(l),w=Q(l),y=Q(l),P=Q(l),z=Q(l),_=Q(l),k=Q(l),x=Q(l),C=Q(l),S=Q(l),R=Q(l),F=Q(l),T=Q(l),I=Q(h),m(((J=function(t){function e(){var i;return(i=t.call(this)||this).states={},i.currentState=void 0,i.type=void 0,r(i,"sibling",E,n(i)),r(i,"team",M,n(i)),r(i,"hp",D,n(i)),r(i,"mp",L,n(i)),r(i,"strength",O,n(i)),r(i,"spellPower",V,n(i)),r(i,"armor",G,n(i)),r(i,"magicResistance",H,n(i)),r(i,"searchRange",N,n(i)),r(i,"attackRange",W,n(i)),r(i,"basicSpeed",j,n(i)),r(i,"attackInterval",B,n(i)),r(i,"attackPrepare",Y,n(i)),r(i,"responseTime",q,n(i)),i.hpexpect=void 0,i.guard=void 0,i.guardRange=void 0,i.actionRepeat=3,i.sprite=void 0,i.target=void 0,i.chasers=[],i.testid=void 0,i.Speed=void 0,i.moveDir=void 0,i.moveOffsetAngle=30,i._attackcooldown=void 0,i._time=void 0,i._maxtime=void 0,i._hurttime=void 0,i.testid=e.allid++,i}i(e,t);var o=e.prototype;return o.isFarFromGuard=function(){if(null!=this.guard){var t=this.node.getPosition(),e=this.guard.node.getPosition();t.subtract(e);return this.node.getPosition().subtract(this.guard.node.getPosition()).length()>this.guardRange}throw new Error("no guard Unit!")},o.ToGuardV2=function(){var t=this.guard.node.getPosition().clone().subtract(this.node.getPosition()).normalize();return new c(t.x,t.y)},o.hastarget=function(){return null!=this.target},o.gettarget=function(){return this.target},o.attackReady=function(){return this._attackcooldown<=0},o.move=function(t,e,i){var r=this.node.getPosition();this.node.position=new u(r.x+e.x*t*this.Speed,r.y+e.y*t*this.Speed,r.z)},o.targetInReach=function(){if(null==this.target)throw new Error("in Target In Reach:no target");return c.distance(this.target.node.getPosition(),this.node.getPosition())<=this.attackRange},o.loader=function(){if(this._hurttime=0,this._time=0,this._attackcooldown=0,this.target=null,this.guard=null,this.sprite=this.node.getComponent(g),null==this.sprite)throw new Error("loader in Unit dont have sprite");0!=this.team?this.sprite.color=new p(255,150,150,255):this.sprite.color=new p(255,255,255,255),this.setMyType(),this.currentState=X.Idle,this.Speed=this.basicSpeed,this.hpexpect=this.hp},o.searchEnemy=function(){var t=f.instance.FindLatestEnemy(this);return!(null==t||c.distance(t.node.getPosition(),this.node.getPosition())>=this.searchRange)&&(this.target=t,this.target.chasers.push(this),!0)},o.hurtexpect=function(t){this.hpexpect-=t,this.hpexpect<=0&&this.escapeFromChasingAll()},o.hurt=function(t,e){if(null==e)b.instance.generateText(new c(0,0),t,this.node.position);else{var i=this.node.getPosition().subtract(e.node.getPosition());b.instance.generateText(new c(i.x,i.y),t,this.node.position)}this._hurttime=1,this.hp-=t,this.hp<=0&&this.death()},o.death=function(){f.instance.UnitDead(this),this.hastarget()&&this.giveupTarget(),this.escapeFromChasingAll()},o.escapeFromChasing=function(t){var e=this.chasers.indexOf(t);if(!(e>-1))throw new Error("No Such a Chaser!");this.chasers.splice(e,1),t.losetarget(this)},o.losetarget=function(t){if(void 0===t&&(t=null),t!=this.target)throw new Error("lose target are something wrong!");this.target=null},o.giveupTarget=function(){null==this.target?console.log("herererere"):this.target.escapeFromChasing(this)},o.escapeFromChasingAll=function(){for(var t,e=a(this.chasers);!(t=e()).done;){t.value.losetarget(this)}this.chasers.length=0},o.stateTransform=function(t){this.currentState=t,this.states[t].StateEnter(this)},o.statereg=function(t,e){this.states[t]=e},o.UnitUpdate=function(t){if(this._attackcooldown>0&&(this._attackcooldown-=t),this._hurttime>0){this._hurttime-=t,this._hurttime<0&&(this._hurttime=0);var e=this.sprite.color;this.sprite.color=new p(e.r,e.g,e.b,255*(1-this._hurttime))}this.sibling=this.node.getSiblingIndex(),this.states[this.currentState].update(this,t)},o.stateAct=function(t){},e}(d)).allid=0,E=e((A=J).prototype,"sibling",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(A.prototype,"team",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(A.prototype,"hp",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(A.prototype,"mp",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(A.prototype,"strength",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(A.prototype,"spellPower",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=e(A.prototype,"armor",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(A.prototype,"magicResistance",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(A.prototype,"searchRange",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(A.prototype,"attackRange",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(A.prototype,"basicSpeed",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),B=e(A.prototype,"attackInterval",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Y=e(A.prototype,"attackPrepare",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),q=e(A.prototype,"responseTime",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),U=A))||U));o._RF.pop()}}}));

System.register("chunks:///_virtual/UnitsManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UnitTypeInform.ts"],(function(e){var t,n,i,r,o,a,s,u,c,l,p,h,f,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,s=e.math,u=e._decorator,c=e.Prefab,l=e.Node,p=e.instantiate,h=e.Component},function(t){f=t.UnitType,m=t.UnitTypeInform,e("UnitType",t.UnitType)}],execute:function(){var d,v,y,b,g,U,P,C,N,T;a._RF.push({},"7399bgNQvxIv755LWO9TZ/l","UnitsManager",void 0);var w=s.Vec2,x=u.ccclass,I=u.property;e("UnitsManager",(d=x("UnitsManager"),v=I(c),y=I(c),b=I(l),d(((T=function(e){function t(){var n;n=e.call(this)||this,i(n,"basic",P,r(n)),i(n,"unitPrefabs",C,r(n)),i(n,"units",N,r(n)),n.types={},n.camp=void 0,n.core=void 0,n.teamNumber=void 0,n.camp=[],n.core=[],n.teamNumber=2;for(var o=0;o<n.teamNumber;o++)n.camp.push([]);return t.instance=r(n),n}n(t,e);var a=t.prototype;return a.CreateUnit=function(e,t){if(null==this.core[t]&&e!=f.core)return null;var n=null,i=this.unitPrefabs[e];if(null==i)throw new Error("no such a unit:"+e);if(e in this.types||(this.types[e]=[]),0==this.types[e].length){var r=p(i);r.setParent(this.units),n=r.getComponent(m).Unit}else(n=this.types[e].pop()).node.active=!0;return n.team=t,this.camp[t].push(n),n.loader(),n},a.CreateCore=function(e){var t;return t=this.CreateUnit(f.core,e),this.core[e]=t,t},a.CoreOfTeam=function(e){return this.core[e]},a.CoreDestroyed=function(e){for(var t,n=this.camp[e].slice(),i=o(n);!(t=i()).done;){var r=t.value;r.hpexpect<=0||(r.hurtexpect(r.hp),r.hurt(r.hp,null))}this.camp[e].splice(0),this.core[e].node.destroy(),this.core[e]=null},a.FindLatestEnemy=function(e){for(var t=null,n=null,i=0;i<this.teamNumber;i++)if(i!=e.team)for(var r,a=o(this.camp[i]);!(r=a()).done;){var s=r.value;if(!(s.hpexpect<=0))if(null==n)t=s,n=w.distance(s.node.getPosition(),e.node.getPosition());else{var u=w.distance(s.node.getPosition(),e.node.getPosition());u<n&&(t=s,n=u)}}return t},a.FindEnemyInRange=function(e,t){for(var n=[],i=0;i<this.teamNumber;i++)if(i!=e.team)for(var r,a=o(this.camp[i]);!(r=a()).done;){var s=r.value;if(!(s.hpexpect<=0))w.distance(s.node.getPosition(),e.node.getPosition())<=t&&n.push(s)}return 0==n.length&&(n=null),n},a.UnitDead=function(e){var t=this.camp[e.team].indexOf(e);if(!(t>-1))throw new Error("No Such a Unit!");this.camp[e.team].splice(t,1),this.types[e.type].push(e),e.node.active=!1},t}(h)).instance=void 0,P=t((U=T).prototype,"basic",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(U.prototype,"unitPrefabs",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=t(U.prototype,"units",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=U))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/UnitsRenderer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UnitsManager.ts"],(function(n){var t,e,r,o,i;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,r=n._decorator,o=n.Component},function(n){i=n.UnitsManager}],execute:function(){var s;e._RF.push({},"a5a87FtSwRMM6qv77HwfUxH","UnitsRenderer",void 0);var a=r.ccclass;r.property,n("UnitsRenderer",a("UnitsRenderer")(s=function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var r=e.prototype;return r.start=function(){},r.onLoad=function(){},r.update=function(n){for(var t=[],e=0;e<i.instance.camp.length;e++)for(var r=0;r<i.instance.camp[e].length;r++)t.push(i.instance.camp[e][r]);t.sort((function(n,t){return t.node.getPosition().y-n.node.getPosition().y}));for(var o=0;o<t.length;o++)t[o].node.setSiblingIndex(o)},e}(o))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/UnitTypeInform.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var e,n,t,i,o,a,c;return{setters:[function(r){e=r.applyDecoratedDescriptor,n=r.inheritsLoose,t=r.initializerDefineProperty,i=r.assertThisInitialized},function(r){o=r.cclegacy,a=r._decorator,c=r.Component}],execute:function(){var l,p,u,s,f;o._RF.push({},"1ffedrajx1LkI0UYQL+gj72","UnitTypeInform",void 0);var y=a.ccclass,h=a.property;r("UnitType",function(r){return r[r.basic=0]="basic",r[r.shooter=1]="shooter",r[r.CircularSpellMagician=2]="CircularSpellMagician",r[r.core=3]="core",r}({})),r("UnitTypeInform",(l=y("UnitTypeInform"),p=h(c),l((f=e((s=function(r){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=r.call.apply(r,[this].concat(o))||this,t(e,"Unit",f,i(e)),e}n(e,r);var o=e.prototype;return o.onLoad=function(){},o.start=function(){},o.update=function(r){},e}(c)).prototype,"Unit",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=s))||u));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});